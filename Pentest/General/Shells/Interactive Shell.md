---
id: Interactive Shell
aliases: []
tags:
  - Pentest/Shells/Interactive-Shell
---

# Interactive Shell

<!-- Info {{{-->
> [!info]- Resources
>
> - [HackTricks](https://book.hacktricks.wiki/en/generic-hacking/reverse-shells/full-ttys.html)
>
<!-- }}} -->

___

<!-- TTY {{{-->
## TTY

<!-- Interactive {{{-->
### Interactive

Spawn an interactive shell

<!-- Resources {{{-->
> [!info]- Resources
>
> - [Upgrading Simple Shells to Fully Interactive TTYs](https://blog.ropnop.com/upgrading-simple-shells-to-fully-interactive-ttys/)
>
<!-- }}} -->

1. Suspend the current process
   (*`Ctrl + Z`*)

```sh
^Z
```

2. Raw terminal mode with disabled `echo` &
   bring the suspended process to the foreground

```sh
stty raw -echo; fg
```

3. Hit `Enter` (*or input `reset` and hit `Enter`*)

4. Export `SHELL`

```sh
export SHELL=/bin/sh
```

```sh
export SHELL=/bin/bash
```

5. Set shell variables to make the terminal full screen

Show the `TERM` variable

```sh
echo $TERM
```

```sh
printenv TERM
```

Set the `TERM` variable

```sh
export TERM=xterm-256color
````

```sh
export TERM=xterm
```

```sh
export TERM=screen
````

<!-- Example {{{-->
> [!example]-
>
> ```sh
> export TERM=xterm-256color
> ```
> ```sh
> xterm-256color
> ```
<!-- }}} -->

Show terminal size (*`rows` & `columns`*)

```sh
stty -a
```

```sh
stty size
```

Set terminal size (*`rows` & `columns`*)

```sh
stty rows 67 columns 318
```

<!-- Example {{{-->
> [!example]-
>
> Show current terminal size
>
> ```sh
> stty size
> ```
> ```sh
> 67 318
> ```
> Set terinal size
>
> ```sh
> stty rows 67 columns 318
> ```
<!-- }}} -->


<!-- }}} -->

<!-- Pseudo {{{-->
### Pseudo

Spawn a pseudo TTY

```sh
script /dev/null -c bash
```

```sh
SHELL=/bin/bash script -q /dev/null
```

<!-- }}} -->

___
<!-- }}} -->

<!-- Bash {{{-->
## Bash

Execute the shell interpreter (*no TTY*)

```sh
/bin/sh -i
```

<!-- Example {{{-->
> [!example]-
>
> ```sh
> /bin/sh -i
> ```
> ```sh
> sh: no job control in this shell
> sh-4.2$
> ```
>
<!-- }}} -->

___
<!-- }}} -->

<!-- AWK {{{-->
## AWK

[AWK](https://linux.die.net/man/1/awk) —
Execute the specified shell interpreter

```sh
awk 'BEGIN {system("/bin/sh")}'
```

___
<!-- }}} -->

<!-- Find {{{-->
## Find

[[Find]] — Execute the specified shell interpreter

Execute with [[#AWK]]

```sh
find / -name <file> -exec /bin/awk 'BEGIN {system("/bin/sh")}' \;
```

<!-- Info {{{-->
> [!info]-
>
> - `-name`: Search for any existing file
> - `/bin/awk`: Execute [[#AWK]]
>
<!-- }}} -->

Execute with the `-exec` opiton

```sh
find . -exec /bin/sh \; -quit
```

___
<!-- }}} -->

<!-- Lua {{{-->
## Lua

[[Lua/General|Lua]] —
Execute the specified shell interpreter

```sh
os.execute('/bin/sh')
```

```sh
os.execute('/bin/bash')
```

___
<!-- }}} -->

<!-- Perl {{{-->
## Perl

[Perl](https://www.perl.org/) —
Execute the specified shell interpreter

```sh
perl —e 'exec "/bin/sh";'
```

```sh
perl —e 'exec "/bin/bash";'
```

```sh
perl: exec "/bin/sh";
```

```sh
perl: exec "/bin/bash";
```

___
<!-- }}} -->

<!-- Python {{{-->
## Python

Check if [[Python/General|Python]] is installed

```sh
which python
```

```sh
which python3
```

Spawn an interactive shell

1. Spawn a pseudo terminal with Python

```sh
python -c "import os; os.system('/bin/sh')"
```

```sh
python -c "import os; os.system('/bin/bash')"
```

```sh
python -c 'import pty; pty.spawn("/bin/sh")'
```

```sh
python3 -c 'import pty; pty.spawn("/bin/bash")'
```

<!-- Info {{{-->
> [!info]-
>
> - `-c`: Run the following Python code in the command line
> - `import pty`: Import the pseudo-terminal module
> - `pty.spawn("/bin/bash")`: Spawn a new process
>   and connect it to the pseudo-terminal
<!-- }}} -->

2. Explot the `TERM` variable

```sh
export TERM=xterm
```

___
<!-- }}} -->

<!-- Ruby {{{-->
## Ruby

[Ruby](https://www.ruby-lang.org/en/) —
Execute the specified shell interpreter from a Ruby script

```sh
exec "/bin/sh"
```

```sh
exec "/bin/bash"
```

___
<!-- }}} -->

<!-- Vim {{{-->
## Vim

[Vim](https://www.vim.org/) —
Execute the specified shell interpreter

```sh
vim -c ':!/bin/sh'
```

```sh
:!bash
```

Vim escape

1. Launch Vim

```sh
vim
```

2. Set `shell` to a shell interpreter

```sh
:set shell=/bin/sh
```

```sh
:set shell=/bin/bash
```

3. Launch the shell

```sh
:shell
```

___
<!-- }}} -->
